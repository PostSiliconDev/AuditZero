# UTXO Output

输出记录了一个 UTXO 的输出，它可以是透明的，也可以是隐私的。Output 有几种形式：OpendOutput，OwnerMemo，Commitment

## Output

Output 是输入的原始形式。它有如下几个字段：

| Name         | Type    | Commitment                                                              |
| ------------ | ------- | ----------------------------------------------------------------------- |
| Asset        | uint254 | 资产类型                                                                |
| Amount       | uint254 | 金额                                                                    |
| OwnerAddress | uint254 | 持有者 Key，由 OwnerKey 哈希计算得到，持有这个 key 的人可以花费资产     |
| AuditAddress | uint254 | 审计 Key，由 AuditKey 哈希计算得到 持有者可以解密 Memo，锁定 commitment |
| SpentAddress | uint256 | 由 SpentKey 计算出来， SpentKey 用于计算 nullifier                      |
| FreezeFlag   | uint254 | 冻结标识，为 1 则不可花费                                               |
| ExtraHash    | uint256 | 记录了一些额外的 hash 信息。用于实现授权交易等                          |
| Random       | uint254 | 随机数                                                                  |

## OwnerMemo

OwnerMemo 是 OpenedOutput 被加密后产生的。持有 ViewKey 和 AuditKey 的人可以解密。 Memo 会记录下 SpentAddress 对应的私钥。

OwnerMemo按照如下顺序编码：

1. Asset
2. Amount
3. OwnerAddr
4. AuditAddr
5. SpentKey
6. FreezeFlag
7. ExtraHash
8. ExtraLength
9. Extradata []bytes

OwnerMemo 被 Owner的公钥 使用 ECDH 加密。这意味着持有OwnerAddr私钥的人可以解密。

## Commitment

Commitment 目前使用 Hash Commitment。它会将 OpenedOutput 进行哈希。
