# Transfer Circuit

电路中使用 UTXO 模式验证交易是否是正确的。具体来说电路中支持了如下几个模式的输入输出：

1. 4 （3 隐私，1 公开） 输入和 16（14 隐私， 2 公开） 输出的 UTXO 结构。
2. 16（15 隐私，1 公开）输入和 16（14 隐私， 2 公开） 输出的 UTXO 结构。

## Build And Check UTXO

### Verify Private Input

针对每一个隐私输入，具体的验证逻辑如下：

1. 使用 `OpenedComitment` 计算 `Commitment`
2. 检查 `FreezeFlag` 必须为 `0`
3. 使用 `OwnerKey` 计算 `OwnerAddr`，并保证 `OwnerAddr` 与 `OpenedComitment` 中一致。
4. 使用 `SpentKey` 计算 `SpentAddr`，并保证 `SpentAddr` 与 `OpenedComitment` 中一致。
5. 使用 `SpentKey` 和 `Commitment` 计算 `Nullifier`
6. 检查 `Merkle Proof`

### Verify Private Output

针对每一个隐私输出，需要执行这样的验证逻辑和工作：

1. 使用 `OpenedComitment` 计算 `Commitment`。
2. 使用 `AuditPubKey` 生成加密的 `AuditMemo`。

### Verify By Asset

所有输入和输出都要依据于资产类型进行检查：

1. 要保证所有资产类型得左右金额相等。
