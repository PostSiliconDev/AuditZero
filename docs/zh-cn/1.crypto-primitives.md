# Crypto Primitives

## Keypair

所有的公私钥对都是基于 babyjubjub 曲线实现的。其中公钥是 `Point`，私钥是一个`uint254`。

## Hash

使用 Poseidon2 哈希执行所有的操作，包括构建 Merkle 树，进行加密等。同时作为一个 Sponge 函数，可以用于形成加密用的密钥流。

## Symmetric Encryption using Public Key

电路友好的加密算法用来加密形成 memo。

加密过程：

1. 生成随机公私钥对
2. 接收者公钥和随机私钥执行 ECDH 算法，生成 Shared Key。
3. 使用 Poseidon2 Sponge 函数构建 Strobe Core 结构
4. 从 Strobe Core 中生成密钥流，与被加密数据执行 bn254 field 上的加法运算，并将密文加回 Strobe Core 中。
5. 最后一个 Strobe Core 生成一个 bn254 field 的值，作为 AEAD。

解密过程：

与加密过程相反，唯一的区别是：

1. ECDH 算法使用随机公钥和接收者私钥
2. 加密过程替换为 bn254 field 上的减法运算
